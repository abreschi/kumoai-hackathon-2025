<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Grocer - Hyper-Personalized Shopping</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#10B981',
                        secondary: '#1E293B',
                        accent: '#F59E0B',
                        success: '#059669',
                        warning: '#D97706'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 font-sans">

    <!-- @COMPONENT: App [Root component with global state] -->
    <div id="app" class="min-h-screen">
        
        <!-- @COMPONENT: Header [Navigation and user switcher] -->
        <!-- @END_COMPONENT: Header -->
        <header class="bg-white shadow-sm border-b">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center">
                        <i class="fas fa-shopping-cart text-primary text-2xl mr-3"></i>
                        <h1 class="text-2xl font-bold text-secondary">Smart Grocer</h1>
                        <span class="ml-2 text-sm bg-primary text-white px-2 py-1 rounded-full">DEMO</span>
                    </div>
                    
                    <!-- @COMPONENT: UserProfileSwitcher [Switch between user personas] -->
                    <div class="flex items-center space-x-3">
                        <span class="text-sm text-gray-600 mr-2">Demo Profile:</span>
                        <button 
                            id="user-switcher-1" 
                            class="user-switcher-btn bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium transition-all"
                            data-event="click:switchUser" 
                            data-user-id="1"
                            data-implementation="Should update global activeUserID state">
                            üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Busy Family
                        </button>
                        <button 
                            id="user-switcher-2" 
                            class="user-switcher-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-all hover:bg-gray-300"
                            data-event="click:switchUser" 
                            data-user-id="2"
                            data-implementation="Should update global activeUserID state">
                            üå± Vegan Athlete
                        </button>
                    </div>
                    <!-- @END_COMPONENT: UserProfileSwitcher -->
                </div>
            </div>
        </header>

        <!-- @COMPONENT: SmartCartView [Main shopping interface] -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                
                <!-- Left Column - Shopping Cart -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-xl shadow-sm border p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-semibold text-secondary">Your Smart Cart</h2>
                            <button 
                                id="inspire-me-btn"
                                class="bg-gradient-to-r from-accent to-orange-500 text-white px-4 py-2 rounded-lg font-medium hover:from-orange-500 hover:to-orange-600 transition-all"
                                data-event="click:openInspireModal"
                                data-implementation="Should open recipe inspiration modal">
                                ‚ú® Inspire Me
                            </button>
                        </div>

                        <!-- @MAP: cartItems.map(item => ( -->
                        <!-- @COMPONENT: CartItem [Individual cart item] -->
                        <div class="cart-items-container" data-bind="cartItems">
                            <!-- Cart Item 1 -->
                            <div class="cart-item flex items-center justify-between p-4 border-b border-gray-100 last:border-b-0" data-mock="true">
                                <div class="flex items-center space-x-4">
                                    <!-- Organic milk carton image -->
                                    <img src="https://images.unsplash.com/photo-1563636619-e9143da7973b?ixlib=rb-4.0.3&auto=format&fit=crop&w=80&h=80" 
                                         alt="Organic Whole Milk" 
                                         class="w-16 h-16 rounded-lg object-cover"
                                         data-mock-image="true">
                                    <div>
                                        <h3 class="font-medium text-secondary" data-bind="item.name">Organic Whole Milk (Gallon)</h3>
                                        <p class="text-sm text-gray-500">$<span data-bind="item.price">4.99</span> each</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="flex items-center border rounded-lg">
                                        <button class="p-2 hover:bg-gray-50" data-event="click:decreaseQuantity" data-implementation="Should decrease item quantity">
                                            <i class="fas fa-minus text-xs text-gray-400"></i>
                                        </button>
                                        <span class="px-3 py-2 text-sm font-medium" data-bind="item.quantity">2</span>
                                        <button class="p-2 hover:bg-gray-50" data-event="click:increaseQuantity" data-implementation="Should increase item quantity">
                                            <i class="fas fa-plus text-xs text-gray-400"></i>
                                        </button>
                                    </div>
                                    <span class="font-semibold text-secondary w-16 text-right">$9.98</span>
                                    <button class="text-red-500 hover:text-red-700 p-1" data-event="click:removeItem" data-implementation="Should remove item from cart">
                                        <i class="fas fa-trash text-sm"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Cart Item 2 -->
                            <div class="cart-item flex items-center justify-between p-4 border-b border-gray-100 last:border-b-0" data-mock="true">
                                <div class="flex items-center space-x-4">
                                    <!-- Cheerios cereal box image -->
                                    <img src="https://pixabay.com/get/g3e687f1acfb3407eb11470aa9628ec50c255b79affb612c514fa44e5555ced69948f805c1a9dfc6bd6213e8e22b29b12690555ede1a9d372e1583247ddd6c069_1280.jpg" 
                                         alt="Cheerios Family Size" 
                                         class="w-16 h-16 rounded-lg object-cover"
                                         data-mock-image="true">
                                    <div>
                                        <h3 class="font-medium text-secondary" data-bind="item.name">Cheerios Family Size</h3>
                                        <p class="text-sm text-gray-500">$<span data-bind="item.price">5.50</span> each</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="flex items-center border rounded-lg">
                                        <button class="p-2 hover:bg-gray-50" data-event="click:decreaseQuantity">
                                            <i class="fas fa-minus text-xs text-gray-400"></i>
                                        </button>
                                        <span class="px-3 py-2 text-sm font-medium" data-bind="item.quantity">1</span>
                                        <button class="p-2 hover:bg-gray-50" data-event="click:increaseQuantity">
                                            <i class="fas fa-plus text-xs text-gray-400"></i>
                                        </button>
                                    </div>
                                    <span class="font-semibold text-secondary w-16 text-right">$5.50</span>
                                    <button class="text-red-500 hover:text-red-700 p-1" data-event="click:removeItem">
                                        <i class="fas fa-trash text-sm"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Cart Item 3 -->
                            <div class="cart-item flex items-center justify-between p-4 border-b border-gray-100 last:border-b-0" data-mock="true">
                                <div class="flex items-center space-x-4">
                                    <!-- Chicken breast package image -->
                                    <img src="https://images.unsplash.com/photo-1604503468506-a8da13d82791?ixlib=rb-4.0.3&auto=format&fit=crop&w=80&h=80" 
                                         alt="Chicken Breast Pack" 
                                         class="w-16 h-16 rounded-lg object-cover"
                                         data-mock-image="true">
                                    <div>
                                        <h3 class="font-medium text-secondary" data-bind="item.name">Chicken Breast Pack</h3>
                                        <p class="text-sm text-gray-500">$<span data-bind="item.price">9.99</span> each</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="flex items-center border rounded-lg">
                                        <button class="p-2 hover:bg-gray-50" data-event="click:decreaseQuantity">
                                            <i class="fas fa-minus text-xs text-gray-400"></i>
                                        </button>
                                        <span class="px-3 py-2 text-sm font-medium" data-bind="item.quantity">2</span>
                                        <button class="p-2 hover:bg-gray-50" data-event="click:increaseQuantity">
                                            <i class="fas fa-plus text-xs text-gray-400"></i>
                                        </button>
                                    </div>
                                    <span class="font-semibold text-secondary w-16 text-right">$19.98</span>
                                    <button class="text-red-500 hover:text-red-700 p-1" data-event="click:removeItem">
                                        <i class="fas fa-trash text-sm"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!-- @END_MAP )) -->
                        <!-- @END_COMPONENT: CartItem -->

                        <!-- Cart Summary -->
                        <div class="mt-6 pt-6 border-t border-gray-200">
                            <div class="flex justify-between items-center mb-4">
                                <span class="text-lg font-medium text-secondary">Subtotal:</span>
                                <span class="text-xl font-bold text-secondary" data-bind="cartTotal">$35.46</span>
                            </div>
                            <button 
                                id="checkout-btn"
                                class="w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-green-600 transition-colors"
                                data-event="click:proceedToCheckout"
                                data-implementation="Should navigate to checkout view">
                                Continue to Checkout
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Recommendations -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-xl shadow-sm border p-6">
                        <h2 class="text-xl font-semibold text-secondary mb-6">
                            <i class="fas fa-magic text-primary mr-2"></i>
                            Recommended for You
                        </h2>

                        <!-- @MAP: recommendations.map(product => ( -->
                        <!-- @COMPONENT: ProductCard [Recommended product] -->
                        <div class="recommendations-container" data-bind="recommendations">
                            <!-- Recommendation 1 -->
                            <div class="product-card p-4 border border-gray-200 rounded-lg mb-4 hover:shadow-md transition-shadow" data-mock="true">
                                <!-- Fresh butter package image -->
                                <img src="https://images.unsplash.com/photo-1589985270826-4b7bb135bc9d?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150" 
                                     alt="Kerrygold Butter" 
                                     class="w-full h-32 object-cover rounded-lg mb-3"
                                     data-mock-image="true">
                                <h3 class="font-medium text-secondary mb-1" data-bind="product.name">Kerrygold Butter</h3>
                                <p class="text-primary font-semibold mb-3">$<span data-bind="product.price">4.99</span></p>
                                <button 
                                    class="w-full bg-primary text-white py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors"
                                    data-event="click:addToCart"
                                    data-implementation="Should add product to cart">
                                    <i class="fas fa-plus mr-2"></i>Add to Cart
                                </button>
                            </div>

                            <!-- Recommendation 2 -->
                            <div class="product-card p-4 border border-gray-200 rounded-lg mb-4 hover:shadow-md transition-shadow" data-mock="true">
                                <!-- Fresh bread loaf image -->
                                <img src="https://images.unsplash.com/photo-1509440159596-0249088772ff?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150" 
                                     alt="Artisan Whole Wheat Bread" 
                                     class="w-full h-32 object-cover rounded-lg mb-3"
                                     data-mock-image="true">
                                <h3 class="font-medium text-secondary mb-1" data-bind="product.name">Artisan Whole Wheat Bread</h3>
                                <p class="text-primary font-semibold mb-3">$<span data-bind="product.price">3.49</span></p>
                                <button 
                                    class="w-full bg-primary text-white py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors"
                                    data-event="click:addToCart"
                                    data-implementation="Should add product to cart">
                                    <i class="fas fa-plus mr-2"></i>Add to Cart
                                </button>
                            </div>

                            <!-- Recommendation 3 -->
                            <div class="product-card p-4 border border-gray-200 rounded-lg mb-4 hover:shadow-md transition-shadow" data-mock="true">
                                <!-- Fresh bananas image -->
                                <img src="https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150" 
                                     alt="Organic Bananas" 
                                     class="w-full h-32 object-cover rounded-lg mb-3"
                                     data-mock-image="true">
                                <h3 class="font-medium text-secondary mb-1" data-bind="product.name">Organic Bananas</h3>
                                <p class="text-primary font-semibold mb-3">$<span data-bind="product.price">2.99</span></p>
                                <button 
                                    class="w-full bg-primary text-white py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors"
                                    data-event="click:addToCart"
                                    data-implementation="Should add product to cart">
                                    <i class="fas fa-plus mr-2"></i>Add to Cart
                                </button>
                            </div>
                        </div>
                        <!-- @END_MAP )) -->
                        <!-- @END_COMPONENT: ProductCard -->

                        <!-- Personalization Insight -->
                        <div class="mt-6 p-4 bg-green-50 rounded-lg border border-green-200">
                            <div class="flex items-start">
                                <i class="fas fa-lightbulb text-accent mt-1 mr-3"></i>
                                <div>
                                    <h4 class="font-medium text-secondary mb-1">Smart Suggestions</h4>
                                    <p class="text-sm text-gray-600" data-bind="personalizationInsight">
                                        Based on your family's preferences and past purchases, we're suggesting breakfast essentials and staples.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <!-- @END_COMPONENT: SmartCartView -->

        <!-- @COMPONENT: InspireMeModal [Recipe inspiration overlay] -->
        <div id="inspire-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50" data-implementation="Should be toggled by Inspire Me button">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h2 class="text-2xl font-bold text-secondary">
                                <i class="fas fa-utensils text-accent mr-3"></i>
                                Recipe Inspiration
                            </h2>
                            <button 
                                id="close-modal-btn"
                                class="text-gray-400 hover:text-gray-600 text-xl"
                                data-event="click:closeModal"
                                data-implementation="Should close the modal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <p class="text-gray-600 mt-2">Delicious meals you can make with items in your cart + a few extras</p>
                    </div>

                    <div class="p-6 overflow-y-auto max-h-[70vh]">
                        <!-- @MAP: recipes.map(recipe => ( -->
                        <!-- @COMPONENT: RecipeCard [Individual recipe suggestion] -->
                        <div class="recipes-container grid gap-6" data-bind="recipes">
                            <!-- Recipe 1 -->
                            <div class="recipe-card bg-gray-50 rounded-lg p-4" data-mock="true">
                                <div class="flex flex-col md:flex-row gap-4">
                                    <!-- Family breakfast scene image -->
                                    <img src="https://images.unsplash.com/photo-1533089860892-a7c6f0a88666?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200" 
                                         alt="Family Pancake Breakfast" 
                                         class="w-full md:w-48 h-32 object-cover rounded-lg"
                                         data-mock-image="true">
                                    <div class="flex-1">
                                        <h3 class="text-lg font-semibold text-secondary mb-2" data-bind="recipe.title">Family Pancake Breakfast</h3>
                                        <p class="text-sm text-gray-600 mb-3">Fluffy pancakes perfect for busy mornings with the kids</p>
                                        
                                        <div class="mb-3">
                                            <h4 class="font-medium text-secondary mb-2">Missing Ingredients:</h4>
                                            <div class="flex flex-wrap gap-2">
                                                <span class="bg-accent text-white px-2 py-1 rounded-full text-xs">Pancake Mix ($3.99)</span>
                                                <span class="bg-accent text-white px-2 py-1 rounded-full text-xs">Maple Syrup ($5.49)</span>
                                                <span class="bg-accent text-white px-2 py-1 rounded-full text-xs">Fresh Berries ($4.99)</span>
                                            </div>
                                        </div>
                                        
                                        <button 
                                            class="bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors"
                                            data-event="click:addRecipeIngredients"
                                            data-implementation="Should add missing ingredients to cart">
                                            <i class="fas fa-plus mr-2"></i>Add Missing Items ($14.47)
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Recipe 2 -->
                            <div class="recipe-card bg-gray-50 rounded-lg p-4" data-mock="true">
                                <div class="flex flex-col md:flex-row gap-4">
                                    <!-- Chicken dinner image -->
                                    <img src="https://images.unsplash.com/photo-1532550907401-a500c9a57435?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200" 
                                         alt="Roasted Chicken Dinner" 
                                         class="w-full md:w-48 h-32 object-cover rounded-lg"
                                         data-mock-image="true">
                                    <div class="flex-1">
                                        <h3 class="text-lg font-semibold text-secondary mb-2" data-bind="recipe.title">One-Pan Roasted Chicken</h3>
                                        <p class="text-sm text-gray-600 mb-3">Easy weeknight dinner with minimal cleanup</p>
                                        
                                        <div class="mb-3">
                                            <h4 class="font-medium text-secondary mb-2">Missing Ingredients:</h4>
                                            <div class="flex flex-wrap gap-2">
                                                <span class="bg-accent text-white px-2 py-1 rounded-full text-xs">Baby Potatoes ($2.99)</span>
                                                <span class="bg-accent text-white px-2 py-1 rounded-full text-xs">Carrots ($1.99)</span>
                                                <span class="bg-accent text-white px-2 py-1 rounded-full text-xs">Fresh Herbs ($2.49)</span>
                                            </div>
                                        </div>
                                        
                                        <button 
                                            class="bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors"
                                            data-event="click:addRecipeIngredients"
                                            data-implementation="Should add missing ingredients to cart">
                                            <i class="fas fa-plus mr-2"></i>Add Missing Items ($7.47)
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- @END_MAP )) -->
                        <!-- @END_COMPONENT: RecipeCard -->
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: InspireMeModal -->

        <!-- @COMPONENT: CheckoutView [Order summary and delivery preferences] -->
        <div id="checkout-view" class="hidden">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="bg-white rounded-xl shadow-sm border p-8">
                    <h2 class="text-2xl font-bold text-secondary mb-6">Checkout</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Order Summary -->
                        <div>
                            <h3 class="text-lg font-semibold text-secondary mb-4">Order Summary</h3>
                            <div class="space-y-3 mb-6">
                                <div class="flex justify-between text-sm">
                                    <span>Organic Whole Milk (2x)</span>
                                    <span>$9.98</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Cheerios Family Size (1x)</span>
                                    <span>$5.50</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Chicken Breast Pack (2x)</span>
                                    <span>$19.98</span>
                                </div>
                                <div class="border-t pt-3 flex justify-between font-semibold">
                                    <span>Total</span>
                                    <span>$35.46</span>
                                </div>
                            </div>
                        </div>

                        <!-- Delivery Preferences -->
                        <div>
                            <h3 class="text-lg font-semibold text-secondary mb-4">
                                <i class="fas fa-brain text-primary mr-2"></i>
                                Smart Delivery Prediction
                            </h3>
                            
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
                                <p class="text-sm text-gray-600 mb-2">Based on your preferences:</p>
                                <div class="space-y-2">
                                    <div class="flex items-center">
                                        <i class="fas fa-truck text-primary mr-2"></i>
                                        <span class="font-medium" data-bind="predicted_method">Home Delivery</span>
                                    </div>
                                    <div class="flex items-center">
                                        <i class="fas fa-clock text-primary mr-2"></i>
                                        <span class="font-medium" data-bind="predicted_time_window">Saturday 5pm-7pm</span>
                                    </div>
                                </div>
                            </div>

                            <button class="w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-green-600 transition-colors">
                                Complete Order
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: CheckoutView -->

    </div>
    <!-- @END_COMPONENT: App -->

    <script>
        (function() {
            // TODO: Implement business logic, API calls, or state management
            
            // @STATE: activeUserID:string = "1", cartItems:array, recommendations:array
            let activeUserID = "1";
            let currentView = "cart";

            // Mock Data Fixtures
            const mockInitialCarts = {
                "1": [
                    { "id": 1, "name": "Organic Whole Milk (Gallon)", "quantity": 2, "price": 4.99 },
                    { "id": 11, "name": "Cheerios Family Size", "quantity": 1, "price": 5.50 },
                    { "id": 12, "name": "Chicken Breast Pack", "quantity": 2, "price": 9.99 }
                ],
                "2": [
                    { "id": 13, "name": "Oatly Oat Milk", "quantity": 1, "price": 4.25 },
                    { "id": 14, "name": "Firm Tofu", "quantity": 2, "price": 2.99 }
                ]
            };

            const mockRecommendations = {
                "1": [
                    { "id": 5, "name": "Kerrygold Butter", "price": 4.99 },
                    { "id": 15, "name": "Artisan Whole Wheat Bread", "price": 3.49 },
                    { "id": 16, "name": "Organic Bananas", "price": 2.99 }
                ],
                "2": [
                    { "id": 6, "name": "Organic Baby Spinach", "price": 3.50 },
                    { "id": 17, "name": "Quinoa", "price": 5.99 },
                    { "id": 18, "name": "Almond Butter", "price": 8.49 }
                ]
            };

            const mockUserProfiles = {
                "1": {
                    "name": "Busy Family",
                    "insight": "Based on your family's preferences and past purchases, we're suggesting breakfast essentials and staples.",
                    "deliveryMethod": "Home Delivery",
                    "deliveryWindow": "Saturday 5pm-7pm"
                },
                "2": {
                    "name": "Vegan Athlete", 
                    "insight": "Perfect for your plant-based lifestyle and workout routine. High-protein, nutritious options.",
                    "deliveryMethod": "Store Pickup",
                    "deliveryWindow": "Sunday 9am-11am"
                }
            };

            const mockCartItemsVegan = [
                { "id": 13, "name": "Oatly Oat Milk", "quantity": 1, "price": 4.25, "image": "https://images.unsplash.com/photo-1563227812-0ea4c22e6cc8?ixlib=rb-4.0.3&auto=format&fit=crop&w=80&h=80" },
                { "id": 14, "name": "Firm Tofu", "quantity": 2, "price": 2.99, "image": "https://images.unsplash.com/photo-1609501676725-7186f464e963?ixlib=rb-4.0.3&auto=format&fit=crop&w=80&h=80" }
            ];

            const mockRecommendationsVegan = [
                { "id": 6, "name": "Organic Baby Spinach", "price": 3.50, "image": "https://images.unsplash.com/photo-1576045057995-568f588f82fb?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150" },
                { "id": 17, "name": "Quinoa", "price": 5.99, "image": "https://images.unsplash.com/photo-1586201375761-83865001e31c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150" },
                { "id": 18, "name": "Almond Butter", "price": 8.49, "image": "https://images.unsplash.com/photo-1571596043530-89ba3e5d29f2?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150" }
            ];

            // User Switching Logic
            function switchUser(userId) {
                activeUserID = userId;
                
                // Update button states
                document.querySelectorAll('.user-switcher-btn').forEach(btn => {
                    if (btn.dataset.userId === userId) {
                        btn.className = 'user-switcher-btn bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium transition-all';
                    } else {
                        btn.className = 'user-switcher-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-all hover:bg-gray-300';
                    }
                });

                // Update cart items
                updateCartItems();
                updateRecommendations();
                updatePersonalizationInsight();
                updateCheckoutPredictions();
            }

            function updateCartItems() {
                const cartContainer = document.querySelector('.cart-items-container');
                if (activeUserID === "2") {
                    // Switch to vegan athlete cart
                    cartContainer.innerHTML = `
                        <div class="cart-item flex items-center justify-between p-4 border-b border-gray-100 last:border-b-0" data-mock="true">
                            <div class="flex items-center space-x-4">
                                <img src="https://images.unsplash.com/photo-1563227812-0ea4c22e6cc8?ixlib=rb-4.0.3&auto=format&fit=crop&w=80&h=80" 
                                     alt="Oatly Oat Milk" 
                                     class="w-16 h-16 rounded-lg object-cover">
                                <div>
                                    <h3 class="font-medium text-secondary">Oatly Oat Milk</h3>
                                    <p class="text-sm text-gray-500">$4.25 each</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="flex items-center border rounded-lg">
                                    <button class="p-2 hover:bg-gray-50">
                                        <i class="fas fa-minus text-xs text-gray-400"></i>
                                    </button>
                                    <span class="px-3 py-2 text-sm font-medium">1</span>
                                    <button class="p-2 hover:bg-gray-50">
                                        <i class="fas fa-plus text-xs text-gray-400"></i>
                                    </button>
                                </div>
                                <span class="font-semibold text-secondary w-16 text-right">$4.25</span>
                                <button class="text-red-500 hover:text-red-700 p-1">
                                    <i class="fas fa-trash text-sm"></i>
                                </button>
                            </div>
                        </div>
                        <div class="cart-item flex items-center justify-between p-4 border-b border-gray-100 last:border-b-0" data-mock="true">
                            <div class="flex items-center space-x-4">
                                <img src="https://pixabay.com/get/g6f0b4fb6f00524976f113c653a50f70af7932e5179600c7f8eef8b7ae036be5d550f2674e8d5d2baec4e2b8e3e70ad711972f9629746f92a0137eda76fdfe153_1280.jpg" 
                                     alt="Firm Tofu" 
                                     class="w-16 h-16 rounded-lg object-cover">
                                <div>
                                    <h3 class="font-medium text-secondary">Firm Tofu</h3>
                                    <p class="text-sm text-gray-500">$2.99 each</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="flex items-center border rounded-lg">
                                    <button class="p-2 hover:bg-gray-50">
                                        <i class="fas fa-minus text-xs text-gray-400"></i>
                                    </button>
                                    <span class="px-3 py-2 text-sm font-medium">2</span>
                                    <button class="p-2 hover:bg-gray-50">
                                        <i class="fas fa-plus text-xs text-gray-400"></i>
                                    </button>
                                </div>
                                <span class="font-semibold text-secondary w-16 text-right">$5.98</span>
                                <button class="text-red-500 hover:text-red-700 p-1">
                                    <i class="fas fa-trash text-sm"></i>
                                </button>
                            </div>
                        </div>
                    `;
                    // Update total
                    document.querySelector('[data-bind="cartTotal"]').textContent = '$10.23';
                } else {
                    // Switch back to family cart
                    location.reload(); // Simple way to reset to original state
                }
            }

            function updateRecommendations() {
                const recContainer = document.querySelector('.recommendations-container');
                if (activeUserID === "2") {
                    // Switch to vegan athlete recommendations
                    recContainer.innerHTML = `
                        <div class="product-card p-4 border border-gray-200 rounded-lg mb-4 hover:shadow-md transition-shadow" data-mock="true">
                            <img src="https://images.unsplash.com/photo-1576045057995-568f588f82fb?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150" 
                                 alt="Organic Baby Spinach" 
                                 class="w-full h-32 object-cover rounded-lg mb-3">
                            <h3 class="font-medium text-secondary mb-1">Organic Baby Spinach</h3>
                            <p class="text-primary font-semibold mb-3">$3.50</p>
                            <button class="w-full bg-primary text-white py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors">
                                <i class="fas fa-plus mr-2"></i>Add to Cart
                            </button>
                        </div>
                        <div class="product-card p-4 border border-gray-200 rounded-lg mb-4 hover:shadow-md transition-shadow" data-mock="true">
                            <img src="https://images.unsplash.com/photo-1586201375761-83865001e31c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150" 
                                 alt="Quinoa" 
                                 class="w-full h-32 object-cover rounded-lg mb-3">
                            <h3 class="font-medium text-secondary mb-1">Quinoa</h3>
                            <p class="text-primary font-semibold mb-3">$5.99</p>
                            <button class="w-full bg-primary text-white py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors">
                                <i class="fas fa-plus mr-2"></i>Add to Cart
                            </button>
                        </div>
                        <div class="product-card p-4 border border-gray-200 rounded-lg mb-4 hover:shadow-md transition-shadow" data-mock="true">
                            <img src="https://pixabay.com/get/g6f0b4fb6f00524976f113c653a50f70af7932e5179600c7f8eef8b7ae036be5d550f2674e8d5d2baec4e2b8e3e70ad711972f9629746f92a0137eda76fdfe153_1280.jpg" 
                                 alt="Almond Butter" 
                                 class="w-full h-32 object-cover rounded-lg mb-3">
                            <h3 class="font-medium text-secondary mb-1">Almond Butter</h3>
                            <p class="text-primary font-semibold mb-3">$8.49</p>
                            <button class="w-full bg-primary text-white py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors">
                                <i class="fas fa-plus mr-2"></i>Add to Cart
                            </button>
                        </div>
                    `;
                }
            }

            function updatePersonalizationInsight() {
                const insight = document.querySelector('[data-bind="personalizationInsight"]');
                insight.textContent = mockUserProfiles[activeUserID].insight;
            }

            function updateCheckoutPredictions() {
                const method = document.querySelector('[data-bind="predicted_method"]');
                const window = document.querySelector('[data-bind="predicted_time_window"]');
                
                if (method) method.textContent = mockUserProfiles[activeUserID].deliveryMethod;
                if (window) window.textContent = mockUserProfiles[activeUserID].deliveryWindow;
            }

            // Modal Logic
            function openInspireModal() {
                document.getElementById('inspire-modal').classList.remove('hidden');
            }

            function closeModal() {
                document.getElementById('inspire-modal').classList.add('hidden');
            }

            // Event Listeners
            document.getElementById('user-switcher-1').addEventListener('click', () => switchUser("1"));
            document.getElementById('user-switcher-2').addEventListener('click', () => switchUser("2"));
            document.getElementById('inspire-me-btn').addEventListener('click', openInspireModal);
            document.getElementById('close-modal-btn').addEventListener('click', closeModal);

            // Close modal when clicking outside
            document.getElementById('inspire-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });

            // Initialize default state
            updatePersonalizationInsight();
            updateCheckoutPredictions();
        })();
    </script>

</body>
</html>